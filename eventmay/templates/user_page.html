{% load staticfiles %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0">
    <title>我的顶奇</title>
    <link href="{% static 'css/user-page.css' %}" rel="stylesheet">
    <link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet">
    <script src="{% static 'js/libs/jquery-1.11.2.min.js' %}"></script>
    <script src="{% static 'js/libs/jweixin-1.0.0.js' %}"></script>
    <script src="{% static 'js/libs/bootstrap.min.js' %}"></script>
</head>
<body style="background-image: url({% static 'img/bj1.jpg' %});
            background-size: 100%;
            background-repeat: no-repeat;
            background-color: #69B1D7;">
    <div class="page-wrapper" >
        <div class="title">
            <img src="{% static 'img/title.png' %}" width="100%">
        </div>
        <div class="user-info">
            <img class="avatar" src="http://img.kbstreet.com/20/avatar/bHHXwjU.jpg">
            <p class="user-name">丸子哥</p>
        </div>
        <div class="water-ball" style="background: url('{% static 'img/bubble.png' %}');background-size: 350px;
    background-repeat: no-repeat;background-position: 50%;">
            <svg id="fillgauge1" width="200" height="60%" style="margin-top: 2px"></svg>
        </div>
        <div class="action-area">
            <a href="javascript:;" class="help">
              <img src="{% static 'img/bt1.png' %}" width="100%">
            </a>
            <a href="javascript:;" class="join" data-toggle="modal" data-target="#follow">
                我也要参加
            </a>
        </div>
        <div class="history" style="background: url('{% static 'img/clothe.png' %}');background-size: 100%; background-repeat: no-repeat;">
            <div class="hl-wrapper">
                <p class="title">4位朋友帮他加过顶奇</p>
                <table class="hl-table">
                    <tr>
                        <td>
                            <img src="http://img.kbstreet.com/20/avatar/bHHXwjU.jpg" class="avatar">
                        </td>
                        <td class="name">
                            丸子哥111
                        </td>
                        <td class="added-value">
                            +233ml
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <img src="http://img.kbstreet.com/20/avatar/bHHXwjU.jpg" class="avatar">
                        </td>
                        <td class="name">
                            丸子哥111
                        </td>
                        <td class="added-value">
                            +233ml
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <img src="http://img.kbstreet.com/20/avatar/bHHXwjU.jpg" class="avatar">
                        </td>
                        <td class="name">
                            丸子哥111
                        </td>
                        <td class="added-value">
                            +233ml
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <img src="http://img.kbstreet.com/20/avatar/bHHXwjU.jpg" class="avatar">
                        </td>
                        <td class="name">
                            丸子哥111
                        </td>
                        <td class="added-value">
                            +233ml
                        </td>
                    </tr>
                </table>
            </div>
        </div>
        <div class="rank-area">
            <a href="">
              <img src="{% static 'img/bt2.png' %}" width="100%">
            </a>
        </div>
        <a class="rules">查看活动规则 >></a>&nbsp;
    </div>
    <div>我的顶奇页面 - {{ user.nickname }}</div>
    <img src="{{ user.headimgurl }}" height="20">
    <p>total score: {{ user.score }}</p>

    <div class="dingqi-modals">
        <div class="modal fade" id="follow">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h4 class="modal-title">参加顶奇</h4>
                    </div>
                    <div class="modal-body text-center">
                        <img src="{% static 'img/qr-dingqi.jpg' %}" width="50%">
                        <p style="margin-top: 20px;">1. 识别二维码，关注顶奇官方公众号</p>
                        <p>2. 点击下菜单"顶奇夏日狂欢节"</p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default dingqi-btn" data-dismiss="modal">知道啦!</button>
                    </div>
                </div><!-- /.modal-content -->
            </div><!-- /.modal-dialog -->
        </div><!-- /.modal -->
    </div>

    <script src="{% static 'js/libs/d3.v3.min.js' %}"></script>
    <script src="{% static 'js/libs/liquidFillGauge.js' %}"></script>
    <script>
    $(function(){
        d3.select("#fillgauge1").call(d3.liquidfillgauge, 984, {
            circleThickness: 0.05, // The outer circle thickness as a percentage of it's radius.
            circleFillGap: 0.02, // The size of the gap between the outer circle and wave circle as a percentage of the outer circles radius.
            circleColor: "#178BCA", // The color of the outer circle.
            backgroundColor: null, // The color of the background
            waveColor: "#178BCA", // The color of the fill wave.
            width: 0, // You might want to set the width and height if it is not detected properly by the plugin
            height: 0,
            waveAnimateTime: 1800
        });

        $('.help').on('click', function(){
            url = '{% url 'add' user.id current_user.id %}';
            $.get(url, function(data){
                console.log(data)
            })
        });

        wx.config({
            debug: false, // 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。
            appId: '{{ appid }}', // 必填，公众号的唯一标识
            timestamp: "{{ timestamp }}", // 必填，生成签名的时间戳
            nonceStr: '{{ noncestr }}', // 必填，生成签名的随机串
            signature: '{{ signature }}',// 必填，签名，见附录1
            jsApiList: ['hideOptionMenu'] // 必填，需要使用的JS接口列表，所有JS接口列表见附录2
        });
        wx.hideOptionMenu();
    });
    </script>
</body>
</html>